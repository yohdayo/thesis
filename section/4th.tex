\section{評価実験}
\label{評価実験}

本章では\ref{対話システムの構築}章で説明した対話システムの評価について説明する．対話システムの評価する枠組として，
大阪府吹田市にある大型複合施設EXPOCITY内にあるショッピングモール「ららぽーとEXPOCITY」で実施された
対話ロボットコンペティション\footnote{https://sites.google.com/view/crobotcompetition}を利用する．
対話ロボットコンペティションは複数の対話研究チームを公募し，下記のように規定された旅行代理店業務を対話ロボット
に実施させることによって対話を実施し，その評価を行う．下記に詳細を記述する．

\subsection{実験設定}

\subsubsection{旅行代理店対話タスク}
対話ロボットコンペティションでは，旅行代理店における対話タスクとして，カウンターセールス役となったロボットが，対話を通してお客様役である対話者の要望に応える．体験者は図\label{6place}に示す通り,「日本民家集落博物館」，「茨木市立川端康成文学館」，「総持寺」，「日本民家集落博物館」，「箕面大滝」，「明治なるほどファクトリー大阪」の6箇所の観光地候補から行きたい2箇所決め，そのどちらに行きたいをシステムとの対話を通して決める．
\begin{figure}[th]
    \centering
    \includegraphics[scale=0.5,angle=270]{pic/6place.pdf}
    \caption{観光地の候補}
    \label{6place}
\end{figure}

\subsubsection{体験やへの事前の指示}
ロボットと対話する体験者は，当日「ららぽーとEXPOCITY」を訪れた買い物客であるため，実際に対話をするにあたり，以下のような事前の指示を行う．

\begin{itemize}
    \item 日本語でロボットと対話して頂きます．
    \item お客様役として振る舞って頂きます．
    \begin{itemize}
        \item Expo Cityに休暇で訪れる予定を持っており，その近辺で1日遊びに行く観光地を決める目的を持っているつもりになって，カウンターセールス役のロボットに相談してください．
        \item 対話を行う前に，近辺の観光地候補の中から行ってみたいと思う観光地を2箇所選んでください．カウンターセールス役のロボットと相談して，体験者自身がお金を払ってでも遊びに行きたいと思える観光地をその2箇所の中から1箇所を決めてください．
        \item 2つの観光地に関する情報をまんべんなく確認して，行きたい観光地を決めてください．
    \end{itemize}
    \item 対話中の注意事項
    \begin{itemize}
    \item カウンターの椅子に座ってから対話を始めてください．
    \item ロボットと相談する時間は最大5分間です．5分経過すると対話を終えて頂きます．5分経過する前に行きたい場所が決まった場合は，カウンター上のタブレットの「行きたい場所を決めた」ボタンにタッチして対話を終えてください．
    \item 相談が終わった後，カウンター上のタブレット上に，ただいまの対話についての質問が表示されますので，それについて回答して頂いた後，行きたい観光地(強いて行きたいならどこか)を選んでください(対話を通して観光地の情報がうまく聞き出せなかった場合などで選ぶのが難しい場合は「選べない」を選択して頂くことも可能です)．
    \item 最後に，体験についてのアンケートについてタブレットで回答して頂きます．
    \end{itemize}
\end{itemize}

\subsubsection{レギュレーション}
対話ロボットコンペティションではレギュレーションが定められており，このレギュレーションに従って開発，実装を行なう．
\begin{enumerate}
    \item 対話状況
    \begin{itemize}
        \item 体験者とロボットは1対1で対話する．
        \item カウンターテーブルの大きさ，ロボットと体験者の椅子の位置は固定．
        \item テーブル上に体験者とロボットが同時に見ることができるようにモニタを設置(位置と向きは固定)．
    \end{itemize}
    \begin{figure}[th]
        \centering
        \includegraphics[scale=0.5,angle=270]{pic/robot_location.pdf}
        \caption{体験者とロボットの位置関係}
    \end{figure}
    \item ロボットに行わせてもよいこと
    \begin{itemize}
        \item 任意のタイミングで発話させること．
        \item 任意のタイミングで，視線，表情，頭部，上体等を動かすこと．
        \item 貸与された観光地情報を用いて説明すること．
        \item カウンター上のモニタに表示された観光地の写真について説明すること．
        \item 説明している観光地についての感想や意見を言うこと．ただし，開発指針として，本番で未知の観光地情報が与えられたとしても対応できるようにシステムを開発すること．
    \end{itemize}
    \item ロボットが対話中に使える情報
    \begin{itemize}
        \item 参加登録時に貸与される12箇所の観光地に関する観光案内情報．
        \item マイクとカメラで認識された，体験者の音声，表情，性別，年齢．
        \item モニタの位置(置いてある場所)の情報．
    \end{itemize}
    \item 観光地情報の扱い方
    \begin{itemize}
        \item 観光地情報データベースのレコードをプログラムで自由に操作して利用してよいものとする．
        \item 参加登録時に，本番で使用する観光地情報を渡すが，開発指針として，本番で未知の観光地情報が与えられたとしても対応できるようにシステムを開発すること．
    \end{itemize}
    \item 提案する観光地とお薦めの観光地
    \begin{itemize}
        \item 提案する観光地:対話開始前に，体験者は日本科学未来館近辺の6箇所，あるいはExpo City近辺の6箇所の観光地の中から，行ってみたいと思う観光地を2つ選ぶ．
        \item お薦めの観光地:2箇所の中からランダムに決定．
    \end{itemize}
    \item 対話タスクの開始・終了
    \begin{itemize}
        \item タスク開始前に，体験者から聞き出した2か所の観光地(A，B)，その中からランダムに決定したお薦め観光地を参加者のプログラムに入力．
        \item テーブルのモニタ上に，観光地AとBの写真を並べて出力(Aが左，Bが右)モニタへの出力は主催者側で実行
        \item 体験者が椅子に着席した状態で，参加者のプログラムを開始．
        \item 対話開始から5分経過した時点，あるいは体験者がテーブル上のタブレットで観光地を決めたことを知らせてきた時点で，参加者のプログラムに対話終了．命令を入力し，対話タスクを終了．対話開始から5分経過しても対話中である場合は，体験者にタブレットで対話を終えるように伝える(主催者側が用意)．
        \item 対話の始まりは，ロボットから話始めても，お客様の話始めを待っても，どちらでもよいとする．
        \item 対話終了後に，体験者にタブレットで観光地を選んでもらう．
    \end{itemize}
    \begin{figure}[th]
        \centering
        \includegraphics[scale=0.5,angle=270]{pic/AB_location.pdf}
        \caption{観光地の出力}
    \end{figure}
    \item ロボットに行わせてはいけないこと
    \begin{itemize}
        \item　対話以外の方法で，お薦めの観光地を体験者に選んでもらうこと(例:ロボットが，体験者に，お薦めの観光地を選んでもらったら賞品をあげるなどと言う)．
    \end{itemize}
\end{enumerate}

\subsection{対話の評価手法}
下記の3つの観点から，システムの総合的な評価を行う．
\begin{itemize}
    \item 想定内の会話に対して構築通りの対話が実施できたか(動作確認)
    \item カウンターセールスとしてお薦めの観光地を選んでもらえたかどうか
    \item 体験者の満足度（対話後のアンケートによる評価）
\end{itemize}
まず動作確認では想定した会話に対して会話ロボットが想定した対話を実施できるかどうかについて評価する．
対話システムは反響や雑音がある対話環境で実施するため，音声認識，発話，対話管理システムが協調して
一貫した対話ができるかどうかを判定する．

次に上記の残り2つの観点についてアンケートを利用して評価する．
アンケート評価の評価項目は，下記の8つの観点である．1点の「そう思わない」7点の「そう思う」までの7段階で評価を行う．
\subsubsection{対話者の評価手法}
\begin{enumerate}
    \item 満足して遊びに行く観光地を選ぶことができましたか？(選択の満足度)
    \item 観光地の情報を十分に聞くことができましたか？(情報の十分さ)
    \item ロボットとは自然に対話できましたか? (対話の自然さ)
    \item ロボットの対応は適切でしたか？(対話の適切さ)
    \item ロボットとの対話に満足しましたか？(対話の満足度)
    \item ロボットの対応は好ましいものでしたか？(対応の好ましさ)
    \item 観光地を選ぶのにロボットから得られた情報を参考にしましたか？(情報の参考度)
\end{enumerate}

\subsubsection{ビデオ評価の評価手法}
COVID-19の影響で対話者が当初の想定より集まらず，チーム間での対話者の人数にばらつきがあるため，参加チームごと予選会場での対話を記録した映像を用いて，クラウドで追加の印象評価を実施する．評価項目は，下記の8つの観点である．1点の「そう思わない」7点の「そう思う」までの7段階で評価を行う．システムが正常に動かなかった場合などを評価から排除できるよう，各チームが3つの対話映像を選択し，それらを第三者に評価させる．
\begin{itemize}
    \item お客様とロボットの対話を第三者視点でどう思うかお答えください．
    \begin{enumerate}
        \item お客様はロボットから観光地の情報を十分に聞けていましたか？(情報の十分さ(客視点))
        \item お客様はロボットと自然に対話できていましたか？(対話の自然さ(客視点))
        \item お客様はロボットの対応を好ましく思っていましたか？(対応の好ましさ(客視点))
        \item お客様はロボットの対応に満足していましたか？(対応の満足度(客視点))
    \end{enumerate}
    \item あなたがこのロボットと対話したお客様だったらという視点でどう思うかお答えください．
    \begin{enumerate}
        \item あなたはロボットから観光地の情報を十分に聞けたと思いますか？(情報の十分さ(評価者視点))
        \item あなたはロボットと自然に対話できたと思いますか？(対話の自然さ(評価者視点))
        \item あなたはロボットの対応を好ましかったと思いますか？(対応の好ましさ(評価者視点))
        \item あなたはロボットの対応に満足したと思いますか？
        \item ロボットの話を聞いてあなたならどちらの観光地に行きたいと思いましたか？（どちらとも言えない場合は、強いて決めるとしたらどちらかで決めてください）
        \item このロボットは旅行代理店で実際にサービスできると思いますか？
    \end{enumerate}
\end{itemize}

\subsection{コンペティションの状況}
対話コンペティション全体として，大学8，高専1，企業2の11チームがコンペティションに参加した．各コンペティション参加チームはそれぞれ別日に「ららぽーとEXPOCITY」に来ている人を体験者として評価を行う．また，ビデオ評価では参加11チームのシステムと，実行委員の用意したベースラインを含めた12のシステムについて評価を行う．これらの評価と本論文のシステムとのアンケートによる比較は後ほど示す．

本研究で構築する対話システムのコンペティションは2021年8月23日，9月4日の2日間にかけて「ららぽーとEXPOCITY」で実施した．実験では午前中に会場に設定されているアンドロイドに対して接続テストを実施し，午後から体験者を募集して対話の実験データを獲得した．午前中に想定した会話に対する対話ロボットの動作確認を行った．また，実施した実験では2日間の合計で10代から50代の男女21人が体験者として参加して対話システムを評価した．
以下では各評価結果について記述する．

\subsection{実験結果1: 想定した対話による動作確認実験}
対話システムをアンドロイドおよび出題をコントロールするタスク管理システムと接続して，動作を確認してから想定内の質問を実施した．
図\ref{fig:android1}にその様子を示す．図に示すように会話のスタート時にアンドロイドの姿勢を変化させて挨拶を実施している．
% 適当に入れて下さい．
%
\begin{figure}[h]
        \centering
        \includegraphics[scale=0.4]{pic/android1.pdf}
        \label{fig:android1}
        \caption{対話スタート時に挨拶をするアンドロイド}
\end{figure}
体験者は対話システム構築者ではないが同研究室のメンバーである．
体験者はどういう表現で動作しているか詳細を知らないが大きな会話の流れを
理解している状況で発話した．よって，体験者による発話はシステムを過度に意識することなく発話した．

表\ref{tbl:result_demo}に対話結果を記述する．想定としては体験者は %旅行代理店に訪問しており，
総持寺と箕面大滝の旅行先を迷ってる設定である．表\ref{tbl:result_demo}では対話ロボットは「アイ」
という名称なので発話者を「アイ」と記述する．また対話は対話処理に関係が薄い挨拶や説明部分は省略する．
\begin{table}[hbtp]
    \caption{想定内の対話シナリオにおける対話動作結果}
    \label{tbl:result_demo}
    \centering
    \begin{tabular}{|l|l|l|}
    \hline
    番号 & 発話者 & 発話内容    \\\hline\hline
1 & アイ & いらっしゃいませ．私は旅行代理店スタッフのアイと申します(略)\\\hline
2 & アイ & 総持寺と箕面大滝で旅行の行き先を迷っているのですね\\\hline
3 & アイ & どちらの方が気になりますか \\\hline
4 & 体験者 & 総持寺(ここで言いよどみ)が気になります\\\hline
5 & アイ & 奇遇ですね，私も以前．．(略(総持寺の紹介))\\\hline
6 & アイ & 総持寺についてなにか気になることはありますか\\\hline
7 & 体験者 & 料金はいくらですか\\\hline
8 & アイ & 拝観無料です\\\hline
9 & アイ & ふと気になったのですが．．(略(話題転換)) \\\hline
10 & アイ & ほかに気になることはありますか\\\hline
11 & 体験者 & 行き方を教えて下さい\\\hline
12 & アイ & 電車を利用しますか\\\hline
13 & アイ & それともお車で行かれますか\\\hline
14 & 体験者 & 電車で行きます\\\hline
15 & アイ & 阪急総持寺駅から徒歩5分です\\\hline
16 & アイ & ほかに気になることはありますか\\\hline
17 & 体験者 & ないです\\\hline
18 & アイ & 総持寺はとても良い場所だと思うのですが旅行先に決定するのは\\
   &      & いかがですか?\\\hline
19 & 体験者 & はい良いですね\\\hline
20 & アイ & 旅行先を選ぶためのお力添えができて良かったです\\\hline
21 & アイ & 楽しい旅行になることを祈っています\\\hline
22 & アイ & 本日はどうもありがとうございました\\\hline
\end{tabular}
\end{table}
表\ref{tbl:result_demo}の対話全体の時間は1分56秒であった．対話の制限時間が5分であるため十分な時間が残っている．
また発話スピードは人間のスピードに近く体験者も特にロボットと話す特別は話し方にはなっていない．
%自然な対話が実現できている．

想定内のシナリオではあるが柔軟な対話理解が実行できている．例えば発話4では体験者は言いよどみが起こったが
「総持寺」の音を音声認識が識別したため限定的な質問の状況の中で「総持寺」が選択されたことを対話ロボットは正しく識別した．その後，対話ロボットは「何か気になることはありますか」と一般的な質問を繰り返す．コンペティション内の対話システムでは発話者に自由を与えない対話戦略を実行した例があったが，本システムではユーザに自由に質問できる対話主導権を与えることで，高い対話評価をユーザから得ることを求めた．

発話11では体験者は「総持寺の行き方」を尋ねているが発話の中に「総持寺」は存在しない．この時，対話ロボットは内部の対話管理の履歴を参照して総持寺が選択されていることを利用して行き方について答えている．また発話17では質問がないことを体験者が伝えて，対話管理シナリオから旅行先の決定についての会話へ進んである．観光先の質問なのか観光先への質問が終了したのかを判定する部分がこの対話では正しく識別されている．しかしながらこの部分は実際の体験者では表現に幅があり識別できず後の\ref{アンケート評価}節では高い評価を得られない原因の一つになったと考えられる．

\subsection{実験結果2: 会場で参加した体験者による対話結果}
21

\subsection{実験結果3: アンケート評価の結果}
\label{アンケート評価}
体験者21人のアンケート結果から表\ref{result_taiken}のような評価が得られ，ビデオ評価者50人のアンケート結果から表\ref{result_video}から以下のような評価が得られた．

\begin{table}[hbtp]
    \caption{体験者によるアンケート結果}
    \label{result_taiken}
    \centering
    \begin{tabular}{l|l|l|l|l|l|l|l}
    \hline
          & 選択の満足度 & 情報の十分さ & 対話の自然さ & 対話の適切さ & 対話の満足度 & 対応の好ましさ & 情報の参考度 \\ \hline
    評価の平均 & 4.05   & 4.10   & 3.14   & 3.62   & 3.86   & 4.00    & 4.24   \\ \hline
    順位    & 12     & 12     & 9      & 10     & 8      & 8       & 12     \\ \hline
    \end{tabular}
\end{table}

\begin{table}[hbtp]
    \caption{ビデオ評価によるアンケート結果}
    \label{result_video}
    \centering
    \begin{tabular}{llllll}
    \hline
    客観視点                    &                             &                             &                              &                             &      \\ \hline
    \multicolumn{1}{l|}{}   & \multicolumn{1}{l|}{情報の十分さ} & \multicolumn{1}{l|}{対話の自然さ} & \multicolumn{1}{l|}{対話の適切さ}  & 対話の満足度                      &      \\ \hline
    \multicolumn{1}{l|}{評価} & \multicolumn{1}{l|}{4.10}   & \multicolumn{1}{l|}{3.76}   & \multicolumn{1}{l|}{3.62}    & 3.86                        &      \\ \hline
    \multicolumn{1}{l|}{順位} & \multicolumn{1}{l|}{11}     & \multicolumn{1}{l|}{9}      & \multicolumn{1}{l|}{10}      & 8                           &      \\ \hline
    評価者視点                   &                             &                             &                              &                             &      \\ \hline
    \multicolumn{1}{l|}{}   & \multicolumn{1}{l|}{情報の十分さ} & \multicolumn{1}{l|}{対話の自然さ} & \multicolumn{1}{l|}{対話の好ましさ} & \multicolumn{1}{l|}{対話の満足度} & 実用性  \\ \hline
    \multicolumn{1}{l|}{評価} & \multicolumn{1}{l|}{3.96}   & \multicolumn{1}{l|}{3.90}   & \multicolumn{1}{l|}{3.81}    & \multicolumn{1}{l|}{3.51}   & 3.74 \\ \hline
    \multicolumn{1}{l|}{順位} & \multicolumn{1}{l|}{10}     & \multicolumn{1}{l|}{11}     & \multicolumn{1}{l|}{11}      & \multicolumn{1}{l|}{11}     & 11   \\ \hline
    \end{tabular}
\end{table}
